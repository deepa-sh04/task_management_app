{"ast":null,"code":"import _objectSpread from\"C:/Users/deepa/tax-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import{taxesAPI,countriesAPI}from'../services/api';export const useTaxData=()=>{const[taxes,setTaxes]=useState([]);const[countries,setCountries]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const fetchTaxes=async()=>{try{setLoading(true);const response=await taxesAPI.getAll();setTaxes(response.data);}catch(err){setError('Failed to fetch taxes');}finally{setLoading(false);}};const fetchCountries=async()=>{try{const response=await countriesAPI.getAll();setCountries(response.data);}catch(err){setError('Failed to fetch countries');}};const updateTax=async(id,data)=>{try{// Find the current tax to preserve other fields\nconst currentTax=taxes.find(tax=>tax.id===id);if(!currentTax)return false;// Prepare update data - preserve gender and createdAt, update name and country\nconst updateData=_objectSpread(_objectSpread({},currentTax),{},{name:data.name,country:data.country// gender and createdAt remain unchanged\n});await taxesAPI.update(id,updateData);await fetchTaxes();// Refresh the data\nreturn true;}catch(err){setError('Failed to update tax');return false;}};useEffect(()=>{const loadData=async()=>{await Promise.all([fetchTaxes(),fetchCountries()]);};loadData();},[]);return{taxes,countries,loading,error,updateTax,refetchTaxes:fetchTaxes};};","map":{"version":3,"names":["useState","useEffect","taxesAPI","countriesAPI","useTaxData","taxes","setTaxes","countries","setCountries","loading","setLoading","error","setError","fetchTaxes","response","getAll","data","err","fetchCountries","updateTax","id","currentTax","find","tax","updateData","_objectSpread","name","country","update","loadData","Promise","all","refetchTaxes"],"sources":["C:/Users/deepa/tax-management-app/src/hooks/useTaxData.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Tax, Country, EditTaxData } from '../types/types';\r\nimport { taxesAPI, countriesAPI } from '../services/api';\r\n\r\nexport const useTaxData = () => {\r\n  const [taxes, setTaxes] = useState<Tax[]>([]);\r\n  const [countries, setCountries] = useState<Country[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchTaxes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await taxesAPI.getAll();\r\n      setTaxes(response.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch taxes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchCountries = async () => {\r\n    try {\r\n      const response = await countriesAPI.getAll();\r\n      setCountries(response.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch countries');\r\n    }\r\n  };\r\n\r\n  const updateTax = async (id: string, data: EditTaxData) => {\r\n    try {\r\n      // Find the current tax to preserve other fields\r\n      const currentTax = taxes.find(tax => tax.id === id);\r\n      if (!currentTax) return false;\r\n      \r\n      // Prepare update data - preserve gender and createdAt, update name and country\r\n      const updateData = {\r\n        ...currentTax,\r\n        name: data.name,\r\n        country: data.country\r\n        // gender and createdAt remain unchanged\r\n      };\r\n      \r\n      await taxesAPI.update(id, updateData);\r\n      await fetchTaxes(); // Refresh the data\r\n      return true;\r\n    } catch (err) {\r\n      setError('Failed to update tax');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      await Promise.all([fetchTaxes(), fetchCountries()]);\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  return {\r\n    taxes,\r\n    countries,\r\n    loading,\r\n    error,\r\n    updateTax,\r\n    refetchTaxes: fetchTaxes,\r\n  };\r\n};"],"mappings":"sHAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,OAASC,QAAQ,CAAEC,YAAY,KAAQ,iBAAiB,CAExD,MAAO,MAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGN,QAAQ,CAAQ,EAAE,CAAC,CAC7C,KAAM,CAACO,SAAS,CAAEC,YAAY,CAAC,CAAGR,QAAQ,CAAY,EAAE,CAAC,CACzD,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAa,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACFH,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAZ,QAAQ,CAACa,MAAM,CAAC,CAAC,CACxCT,QAAQ,CAACQ,QAAQ,CAACE,IAAI,CAAC,CACzB,CAAE,MAAOC,GAAG,CAAE,CACZL,QAAQ,CAAC,uBAAuB,CAAC,CACnC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAQ,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAJ,QAAQ,CAAG,KAAM,CAAAX,YAAY,CAACY,MAAM,CAAC,CAAC,CAC5CP,YAAY,CAACM,QAAQ,CAACE,IAAI,CAAC,CAC7B,CAAE,MAAOC,GAAG,CAAE,CACZL,QAAQ,CAAC,2BAA2B,CAAC,CACvC,CACF,CAAC,CAED,KAAM,CAAAO,SAAS,CAAG,KAAAA,CAAOC,EAAU,CAAEJ,IAAiB,GAAK,CACzD,GAAI,CACF;AACA,KAAM,CAAAK,UAAU,CAAGhB,KAAK,CAACiB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACH,EAAE,GAAKA,EAAE,CAAC,CACnD,GAAI,CAACC,UAAU,CAAE,MAAO,MAAK,CAE7B;AACA,KAAM,CAAAG,UAAU,CAAAC,aAAA,CAAAA,aAAA,IACXJ,UAAU,MACbK,IAAI,CAAEV,IAAI,CAACU,IAAI,CACfC,OAAO,CAAEX,IAAI,CAACW,OACd;AAAA,EACD,CAED,KAAM,CAAAzB,QAAQ,CAAC0B,MAAM,CAACR,EAAE,CAAEI,UAAU,CAAC,CACrC,KAAM,CAAAX,UAAU,CAAC,CAAC,CAAE;AACpB,MAAO,KAAI,CACb,CAAE,MAAOI,GAAG,CAAE,CACZL,QAAQ,CAAC,sBAAsB,CAAC,CAChC,MAAO,MAAK,CACd,CACF,CAAC,CAEDX,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4B,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CAAClB,UAAU,CAAC,CAAC,CAAEK,cAAc,CAAC,CAAC,CAAC,CAAC,CACrD,CAAC,CACDW,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLxB,KAAK,CACLE,SAAS,CACTE,OAAO,CACPE,KAAK,CACLQ,SAAS,CACTa,YAAY,CAAEnB,UAChB,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}